{% extends "base.html" %}

{% block start %} 

<div class="container my-5">
    
    <h1 class="mb-4">Dostępne Restauracje</h1>
    
    <div id="restaurants-container">
        </div>
</div>

<script>
    fetch('/api/restaurants/')
        .then(response => {
            if (!response.ok) {
                // Rzuca błąd, jeśli status HTTP nie jest 2xx
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            const container = document.getElementById('restaurants-container');
            
            if (data.length === 0) {
                // Użycie alertu Bootstrapa, gdy lista jest pusta
                container.innerHTML = '<div class="alert alert-info" role="alert">Brak dostępnych restauracji.</div>';
            } else {
                // 1. Tworzymy element <ul> z klasą 'list-group'
                const ul = document.createElement('ul');
                ul.className = 'list-group shadow-sm'; // Klasa list-group z cieniem
                
                data.forEach(restaurant => {
                    const li = document.createElement('li');
                    
                    // 2. Dodajemy klasę 'list-group-item' do każdego elementu <li>
                    li.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-center';

                    // 3. Dodajemy link
                    li.innerHTML = `
                        <a href="/restaurants/${restaurant.id}/" class="text-decoration-none fw-bold">
                            ${restaurant.name}
                        </a>
                        <span class="text-primary">&rarr;</span> 
                    `;
                    
                    ul.appendChild(li);
                });
                
                container.appendChild(ul);
            }
        })
        .catch(error => {
            const container = document.getElementById('restaurants-container');
            container.innerHTML = `<div class="alert alert-danger" role="alert">Wystąpił błąd podczas ładowania danych: ${error.message}</div>`;
            console.error('Błąd ładowania danych:', error);
        });
</script>

{% endblock %}